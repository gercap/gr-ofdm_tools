<?xml version='1.0' encoding='ASCII'?>
<block>
  <name>Ofdm Radio Hier</name>
  <key>ofdm_radio_h</key>
  <category>ofdm_tools</category>
  <import>import ofdm_tools</import>
  <make>ofdm_tools.ofdm_radio_hier(
    pilot_carriers=$pilot_carriers,
    pilot_symbols=$pilot_symbols,
    occupied_carriers=$occupied_carriers,
    samp_rate=$samp_rate,
    payload_mod=$payload_mod,
    sync_word1=$sync_word1,
    sync_word2=$sync_word2,
    scramble_mode=$scramble_mode,
    crc_mode=$crc_mode,
    clipping_factor=$clipping_factor,
    clipper_mode=$clipper_mode,
    filter_mode=$filter_mode,
)</make>
  <callback>set_pilot_carriers($pilot_carriers)</callback>
  <callback>set_pilot_symbols($pilot_symbols)</callback>
  <callback>set_occupied_carriers($occupied_carriers)</callback>
  <callback>set_samp_rate($samp_rate)</callback>
  <callback>set_payload_mod($payload_mod)</callback>
  <callback>set_sync_word1($sync_word1)</callback>
  <callback>set_sync_word2($sync_word2)</callback>
  <callback>set_scramble_mode($scramble_mode)</callback>
  <callback>set_crc_mode($crc_mode)</callback>
  <callback>set_clipping_factor($clipping_factor)</callback>
  <callback>set_clipper_mode($clipper_mode)</callback>
  <callback>set_filter_mode($filter_mode)</callback>
  <param>
    <name>pilot_carriers</name>
    <key>pilot_carriers</key>
    <value>((-40, -14, 13, 39),)</value>
    <type>raw</type>
  </param>
  <param>
    <name>pilot_symbols</name>
    <key>pilot_symbols</key>
    <value>((1, 1, 1, -1,),)</value>
    <type>raw</type>
  </param>
  <param>
    <name>occupied_carriers</name>
    <key>occupied_carriers</key>
    <value>([-54, -53, -52, -51, -50, -49, -48, -47, -46, -45, -44, -43, -42, -41, -39, -38, -37, -36, -35, -34, -33, -32, -31, -30, -29, -28, -27, -26, -25, -24, -23, -22, -21, -20, -19, -18, -17, -16, -15, -13, -12, -11, -10, -9, -8, -7, -6, -5, -4, -3, -2, -1, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53],)</value>
    <type>raw</type>
  </param>
  <param>
    <name>samp_rate</name>
    <key>samp_rate</key>
    <value>10000</value>
    <type>raw</type>
  </param>
  <param>
    <name>sync_word1</name>
    <key>sync_word1</key>
    <value>[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, 1.42, 0.0, 1.42, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, 1.42, 0.0, -1.42, 0.0, 1.42, 0.0, 1.42, 0.0, 1.42, 0.0, 1.42, 0.0, 1.42, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, 1.42, 0.0, -1.42, 0.0, -1.42, 0.0, 1.42, 0.0, -1.42, 0.0, 1.42, 0.0, -1.42, 0.0, 1.42, 0.0, -1.42, 0.0, 1.42, 0.0, 1.42, 0.0, 1.42, 0.0, -1.42, 0.0, 1.42, 0.0, 1.42, 0.0, 1.42, 0.0, -1.42, 0.0, 1.42, 0.0, 1.42, 0.0, 1.42, 0.0, 1.42, 0.0, -1.42, 0.0, 1.42, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, 1.42, 0.0, -1.42, 0.0, 1.42, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, -1.42, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]</value>
    <type>raw</type>
  </param>
  <param>
    <name>sync_word2</name>
    <key>sync_word2</key>
    <value>[0j, 0j, 0j, 0j, 0j, 0j, 0j, 0j, 0j, 0j, (-1+0j), (1+0j), (-1+0j), (-1+0j), (1+0j), (1+0j), (1+0j), (1+0j), (1+0j), (1+0j), (1+0j), (1+0j), (-1+0j), (-1+0j), (1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (1+0j), (-1+0j), (1+0j), (-1+0j), (-1+0j), (-1+0j), (1+0j), (-1+0j), (1+0j), (-1+0j), (1+0j), (-1+0j), (1+0j), (1+0j), (-1+0j), (1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (1+0j), (1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), 0j, (1+0j), (-1+0j), (1+0j), (1+0j), (1+0j), (-1+0j), (1+0j), (1+0j), (1+0j), (-1+0j), (1+0j), (1+0j), (1+0j), (1+0j), (-1+0j), (1+0j), (-1+0j), (-1+0j), (-1+0j), (1+0j), (-1+0j), (1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (1+0j), (1+0j), (-1+0j), (-1+0j), (-1+0j), (1+0j), (-1+0j), (1+0j), (1+0j), (1+0j), (1+0j), (1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (-1+0j), (1+0j), (-1+0j), (-1+0j), (1+0j), (-1+0j), (1+0j), 0j, 0j, 0j, 0j, 0j, 0j, 0j, 0j, 0j, 0j]</value>
    <type>raw</type>
  </param>


  <param>
    <name>payload_mod</name>
    <key>payload_mod</key>
    <type>enum</type>
    <option>
      <name>bpsk</name>
      <key>'bpsk'</key>
    </option>
    <option>
      <name>qpsk</name>
      <key>'qpsk'</key>
    </option>
    <option>
      <name>qam16</name>
      <key>'qam16'</key>
    </option>
  </param>  

  <param>
    <name>scramble_mode</name>
    <key>scramble_mode</key>
    <type>enum</type>
    <option>
      <name>No srambler</name>
      <key>0</key>
    </option>
    <option>
      <name>Scramble</name>
      <key>1</key>
    </option>
  </param>

  <param>
    <name>crc_mode</name>
    <key>crc_mode</key>
    <type>enum</type>
    <option>
      <name>No CRC</name>
      <key>0</key>
    </option>
    <option>
      <name>W CRC</name>
      <key>1</key>
    </option>
  </param>
  <param>
    <name>clipper_mode</name>
    <key>clipper_mode</key>
    <type>enum</type>
    <option>
      <name>No Clipping</name>
      <key>0</key>
    </option>
    <option>
      <name>Clip TX Signal</name>
      <key>1</key>
    </option>
  </param>
  <param>
    <name>clipping_factor</name>
    <key>clipping_factor</key>
    <value>10</value>
    <type>raw</type>
  </param>
  <param>
    <name>filter_mode</name>
    <key>clipper_mode</key>
    <type>enum</type>
    <option>
      <name>ON</name>
      <key>1</key>
    </option>
    <option>
      <name>OFF</name>
      <key>0</key>
    </option>
  </param>
  <sink>
    <name>tagged stream in</name>
    <type>byte</type>
    <vlen>1</vlen>
  </sink>
  <sink>
    <name>radio in</name>
    <type>complex</type>
    <vlen>1</vlen>
  </sink>
  <source>
    <name>tagged stream out</name>
    <type>byte</type>
    <vlen>1</vlen>
  </source>
  <source>
    <name>radio out</name>
    <type>complex</type>
    <vlen>1</vlen>
  </source>
  <doc>An OFDM transceiver
input_mode can be set to include CRC and / or Scrambler
output gets automatically set up</doc>
</block>
